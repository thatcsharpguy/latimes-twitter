import pytest
from freezegun import freeze_time

from twitter.reply_builder import parse_tweet


@freeze_time("2021-02-22")
@pytest.mark.parametrize(["input_tweet", "expected_output"],[
    ("mx jueves 10 pm", '22:00 ğŸ‡²ğŸ‡½ğŸ‡¨ğŸ‡·ğŸ‡¸ğŸ‡», 23:00 ğŸ‡¨ğŸ‡´ğŸ‡ªğŸ‡¨ğŸ‡µğŸ‡ªğŸ‡µğŸ‡¦, 01:00+1 ğŸ‡¨ğŸ‡±ğŸ‡¦ğŸ‡·ğŸ‡µğŸ‡¾ğŸ‡ºğŸ‡¾, 00:00+1 ğŸ‡»ğŸ‡ª, 05:00+1 ğŸ‡¬ğŸ‡¶'),
    ("domingo 10 pm", '22:00 ğŸ‡²ğŸ‡½ğŸ‡¨ğŸ‡·ğŸ‡¸ğŸ‡», 23:00 ğŸ‡¨ğŸ‡´ğŸ‡ªğŸ‡¨ğŸ‡µğŸ‡ªğŸ‡µğŸ‡¦, 01:00+1 ğŸ‡¨ğŸ‡±ğŸ‡¦ğŸ‡·ğŸ‡µğŸ‡¾ğŸ‡ºğŸ‡¾, 00:00+1 ğŸ‡»ğŸ‡ª, 05:00+1 ğŸ‡¬ğŸ‡¶'),
    ("mx SÃ¡bado 10:30 pm", '22:30 ğŸ‡²ğŸ‡½ğŸ‡¨ğŸ‡·ğŸ‡¸ğŸ‡», 23:30 ğŸ‡¨ğŸ‡´ğŸ‡ªğŸ‡¨ğŸ‡µğŸ‡ªğŸ‡µğŸ‡¦, 01:30+1 ğŸ‡¨ğŸ‡±ğŸ‡¦ğŸ‡·ğŸ‡µğŸ‡¾ğŸ‡ºğŸ‡¾, 00:30+1 ğŸ‡»ğŸ‡ª, 05:30+1 ğŸ‡¬ğŸ‡¶'),
    ("cr jueves 10 pm", '22:00 ğŸ‡²ğŸ‡½ğŸ‡¨ğŸ‡·ğŸ‡¸ğŸ‡», 23:00 ğŸ‡¨ğŸ‡´ğŸ‡ªğŸ‡¨ğŸ‡µğŸ‡ªğŸ‡µğŸ‡¦, 01:00+1 ğŸ‡¨ğŸ‡±ğŸ‡¦ğŸ‡·ğŸ‡µğŸ‡¾ğŸ‡ºğŸ‡¾, 00:00+1 ğŸ‡»ğŸ‡ª, 05:00+1 ğŸ‡¬ğŸ‡¶'),
    ("ar jueves 10 pm", '19:00 ğŸ‡²ğŸ‡½ğŸ‡¨ğŸ‡·ğŸ‡¸ğŸ‡», 20:00 ğŸ‡¨ğŸ‡´ğŸ‡ªğŸ‡¨ğŸ‡µğŸ‡ªğŸ‡µğŸ‡¦, 22:00 ğŸ‡¨ğŸ‡±ğŸ‡¦ğŸ‡·ğŸ‡µğŸ‡¾ğŸ‡ºğŸ‡¾, 21:00 ğŸ‡»ğŸ‡ª, 02:00+1 ğŸ‡¬ğŸ‡¶'),
    ("gq  jueves   10   am", '03:00 ğŸ‡²ğŸ‡½ğŸ‡¨ğŸ‡·ğŸ‡¸ğŸ‡», 04:00 ğŸ‡¨ğŸ‡´ğŸ‡ªğŸ‡¨ğŸ‡µğŸ‡ªğŸ‡µğŸ‡¦, 06:00 ğŸ‡¨ğŸ‡±ğŸ‡¦ğŸ‡·ğŸ‡µğŸ‡¾ğŸ‡ºğŸ‡¾, 05:00 ğŸ‡»ğŸ‡ª, 10:00 ğŸ‡¬ğŸ‡¶'),
])
def test_parse_tweet(input_tweet, expected_output):
    reply = parse_tweet("@tzconvert " + input_tweet)

    assert reply == expected_output
